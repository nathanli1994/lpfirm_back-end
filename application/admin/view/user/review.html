{include file="common/css" /}
{include file="common/top" /}
{include file="common/left" /}






<!-- Page content -->
<div id="content" class="col-md-12">









    <!-- page header -->
    <div class="pageheader">


        <h2><i class="fa fa-bar-chart-o" style="line-height: 48px;padding-left: 0;"></i> 统计 <span></span></h2>




    </div>
    <!-- /page header -->

    <!-- content main container -->
    <div class="main">
        <!-- row Line Chart and Bar Chart 左侧柱状图和右侧饼图-->
        <div class="row">
            <!-- col 8 左侧柱状图对应的-->
            <div class="col-md-8">
                <!-- tile -->
                <section class="tile color transparent-white">



                    <!-- tile header -->
                    <div class="tile-header">
                        <h1><strong>业务数量</strong> 同期对比</h1>
                        <div class="controls">
                            <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                            <a href="#" class="remove"><i class="fa fa-times"></i></a>
                        </div>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body">

                        <table id="stack-chart" class="flot-chart" data-type="bars" data-stack="true" data-tool-tip="show" data-width="100%" data-height="250px" data-font-color="rgba(255,255,255,.8)" data-legend="hidden" data-y-max="3500" data-tick-color="rgba(255,255,255,.3)">
                            <thead>
                            <tr>
                                <th></th>
                                <th style="color : #555;">{$this_year}年</th>
                                <th style="color : #FF0066;">{$last_year}年</th>
                            </tr>
                            </thead>
                            <tbody>
                            {volist name="res2" id="v"}
                            <tr>
                                <th>{$v.month} 月</th>
                                <td>{$v.this_year_people_per_month}</td>
                                <td>{$v.last_year_people_per_month}</td>
                            </tr>
                            {/volist}
                            </tbody>
                        </table>

                    </div>
                    <!-- /tile body -->
                </section>
                <!-- /tile -->

                <!-- tile -->
                <section class="tile color transparent-white">



                    <!-- tile header -->
                    <div class="tile-header">
                        <h1><strong>客人数量</strong> 同期对比</h1>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body">

                        <table id="stack-chart" class="flot-chart" data-type="bars" data-stack="true" data-tool-tip="show" data-width="100%" data-height="250px" data-font-color="rgba(255,255,255,.8)" data-legend="hidden" data-y-max="3500" data-tick-color="rgba(255,255,255,.3)">
                            <thead>
                            <tr>
                                <th></th>
                                <th style="color : #555;">{$this_year}年</th>
                                <th style="color : #FF0066;">{$last_year}年</th>
                            </tr>
                            </thead>
                            <tbody>

                            {volist name="res1" id="v"}
                            <tr>
                                <th>{$v.month}月</th>
                                <td>{$v.this_year_people_per_month}</td>
                                <td>{$v.last_year_people_per_month}</td>
                            </tr>
                            {/volist}

                            </tbody>
                        </table>

                    </div>
                    <!-- /tile body -->
                </section>
                <!-- /tile -->
            </div>
            <!-- /col 8 -->



            <!-- col 4 右侧饼状图对应的-->
            <div class="col-md-4">
                <!-- tile -->
                <section class="tile color transparent-white">



                    <!-- tile header -->
                    <div class="tile-header">
                        <h1><strong>日收入</strong> 统计</h1>
                        <div class="controls">
                            <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                            <a href="#" class="remove"><i class="fa fa-times"></i></a>
                        </div>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body">

                        <table id="pie-chart" class="flot-chart" data-type="pie" data-inner-radius="0.4" data-pie-label="show" data-width="100%" data-height="250px" data-tool-tip="false">
                            <thead>
                            <tr>
                                <th></th>
                                <th style="color : #b8ff00;">应收</th>
                                <th style="color : #ffc100;">实收</th>
                                <th style="color : #ff4a43;">差额</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th></th>
                                <td>{$sum_ideal}</td>
                                <td>{$sum_real}</td>
                                <td>{$short}</td>
                            </tr>
                            </tbody>
                        </table>

                        <div>
                            <span style="color : #000000;">应收：</span><span style="color : #b8ff00;">    ${$sum_ideal}</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                            <span style="color : #000000;">实收：</span><span style="color : #ffc100;">    ${$sum_real}</span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                            <span style="color : #000000;">差额：</span><span style="color : #ff4a43;">    ${$short}</span>
                    </div>
                    <!-- /tile body -->




                </section>
                <!-- /tile -->

                <!-- tile -->
                <section class="tile color transparent-white">



                    <!-- tile header -->
                    <div class="tile-header">
                        <h1><strong>{$month}</strong> 统计</h1>
                        <div class="controls">
                            <a href="#" class="refresh"><i class="fa fa-refresh"></i></a>
                            <a href="#" class="remove"><i class="fa fa-times"></i></a>
                        </div>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body">

                        <table id="pie-chart02" class="flot-chart" data-type="pie" data-inner-radius="0.8" data-pie-label="hidden" data-width="100%" data-height="250px" data-tool-tip="show">
                            <thead>
                            <tr>
                                <th></th>
                                <th style="color : #a2d200;">总计</th>
                                <th style="color : #ffc100;">业务</th>
                                <th style="color : #ff4a43;">业绩</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th></th>
                                <td>10000</td>
                                <td>{$sum_month_income}</td>
                                <td>10000</td>
                            </tr>
                            </tbody>
                        </table>

                        <div class="custom-labels" data-target-flot="#pie-chart02"></div>

                    </div>
                    <!-- /tile body -->




                </section>
                <!-- /tile -->
            </div>
            <!-- /col 4 -->
        </div>
        <!-- /row -->


        <!-- row 列表展示-->
        <div class="row">

            <!-- col 12 -->
            <div class="col-md-12">
                <!-- tile -->
                <section class="tile transparent">


                    <!-- tile header -->
                    <div class="tile-header transparent">
                        <h1><strong>职位与员工</strong></h1>
                    </div>
                    <!-- /tile header -->

                    <!-- tile body -->
                    <div class="tile-body color transparent-black rounded-corners">

                        <div class="table-responsive">
                            <table  class="table table-datatable table-custom" id="basicDataTable">
                                <thead>
                                <tr>
                                    <th class="text-center">职位</th>
                                    <th class="text-center">人数</th>
                                </tr>
                                </thead>
                                <tbody id="sortable">

                                {volist name="position_people" id="v"}
                                <tr>
                                    <td class="text-center">
                                        <a href="{:url('user/showUserByPosition',array('position'=>$v.name))}">{$v.name}</a>
                                    </td>
                                    <td class="text-center">{$v.count}</td>
                                </tr>
                                {/volist}

                                </tbody>
                            </table>
                        </div>

                    </div>
                    <!-- /tile body -->



                </section>
                <!-- /tile -->
            </div>
            <!-- /col 12 -->



        </div>
        <!-- /row -->
    </div>
    <!-- /content container -->
</div>
<!-- Page content end -->











</div>
<!-- Make page fluid-->




</div>
<!-- Wrap all page content end -->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/static/assets/js/jquery.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/static/assets/js/vendor/bootstrap/bootstrap.min.js"></script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css&skin=sons-of-obsidian"></script>
<script type="text/javascript" src="/static/assets/js/vendor/mmenu/js/jquery.mmenu.min.js"></script>
<script type="text/javascript" src="/static/assets/js/vendor/sparkline/jquery.sparkline.min.js"></script>
<script type="text/javascript" src="/static/assets/js/vendor/nicescroll/jquery.nicescroll.min.js"></script>
<script type="text/javascript" src="/static/assets/js/vendor/animate-numbers/jquery.animateNumbers.js"></script>
<script type="text/javascript" src="/static/assets/js/vendor/videobackground/jquery.videobackground.js"></script>
<script type="text/javascript" src="/static/assets/js/vendor/blockui/jquery.blockUI.js"></script>

<script src="/static/assets/js/vendor/flot/jquery.flot.min.js"></script>
<script src="/static/assets/js/vendor/flot/jquery.flot.categories.min.js"></script>
<script src="/static/assets/js/vendor/flot/jquery.flot.pie.min.js"></script>
<script src="/static/assets/js/vendor/flot/jquery.flot.stack.min.js"></script>
<script src="/static/assets/js/vendor/graphtable/jquery.graphTable-0.3.js"></script>
<script src="/static/assets/js/vendor/flot/jquery.flot.tooltip.min.js"></script>

<script src="/static/assets/js/vendor/rickshaw/raphael-min.js"></script>
<script src="/static/assets/js/vendor/rickshaw/d3.v2.js"></script>
<script src="/static/assets/js/vendor/rickshaw/rickshaw.min.js"></script>

<script src="/static/assets/js/vendor/morris/morris.min.js"></script>

<script src="/static/assets/js/vendor/easypiechart/jquery.easypiechart.min.js"></script>

<script src="/static/assets/js/vendor/justgage/justgage.js"></script>

<script src="/static/assets/js/minimal.min.js"></script>

<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>


<script>
    $(function(){
        // Line Chart
        var bars = false;
        var lines = true;
        var pie = false;

        var initializeFlot = function(){

            var el = $('table.flot-chart');

            el.each(function(){
                var data = $(this).data();
                var colors = [];
                var gridColor = data.tickColor || 'rgba(0,0,0,.1)';

                $(this).find('thead th:not(:first)').each(function() {
                    colors.push($(this).css('color'));
                });

                if(data.type){
                    bars = data.type.indexOf('bars') != -1;
                    lines = data.type.indexOf('lines') != -1;
                    pie = data.type.indexOf('pie') != -1;
                }

                $(this).graphTable({
                        series: 'columns',
                        position: 'replace',
                        colors: colors,
                        width: data.width,
                        height: data.height
                    },
                    {
                        series: {
                            stack: data.stack,
                            pie: {
                                show: pie,
                                innerRadius: data.innerRadius || 0,
                                label:{
                                    show: data.pieLabel=='show' ? true:false
                                }
                            },
                            bars: {
                                show: bars,
                                barWidth: data.barWidth || 0.5,
                                fill: data.fill || 1,
                                align: 'center'
                            },
                            lines: {
                                show: lines,
                                fill: 0.1,
                                lineWidth: 3
                            },
                            shadowSize: 0,
                            points: {
                                radius: 4
                            }
                        },
                        xaxis: {
                            mode: 'categories',
                            tickLength: 0,
                            font :{
                                lineHeight: 24,
                                weight: '300',
                                color: data.fontColor,
                                size: 14
                            }
                        },
                        yaxis: {
                            tickColor: gridColor,
                            tickFormatter: function number(x) {  var num; if (x >= 1000) { num=(x/1000)+'k'; }else{ num=x; } return num; },
                            max: data.yMin,
                            font :{
                                lineHeight: 15,
                                weight: '300',
                                color: data.fontColor
                            }
                        },
                        grid: {
                            borderWidth: {
                                top: 0,
                                right: 0,
                                bottom: 1,
                                left: 1
                            },
                            borderColor: gridColor,
                            margin: 13,
                            minBorderMargin:0,
                            labelMargin:20,
                            hoverable: true,
                            clickable: true,
                            mouseActiveRadius:6
                        },
                        legend: { show: data.legend=='show' ? true:false },
                        tooltip: data.toolTip=='show' ? true:false,
                        tooltipOpts: { content: (pie ? '%p.0%, %s':'<b>%s</b> :  %y') }
                    });
            });
        };

        // Pie Chart custom labels

        $('.custom-labels').each(function () {
            var el= $(this);
            var data = el.data();
            var colors = [];
            var info = [];
            var item = '';

            $(data.targetFlot).find('thead th:not(:first)').each(function() {
                colors.push($(this).css('color'));
                info.push($(this).text());
            });

            for(var i=0;i<info.length;i++){
                item += '<li><span class="badge badge-outline" style="border-color:' + colors[i] + '"></span>' + info[i] + ' ' + '<small>' + $(data.targetFlot).find("tbody td").eq(i).text() + 'CAD' + '</small>' + '</li>';
            }

            el.append('<ul class="nolisttypes chart-legend">'+item+'</ul>');

        });

        initializeFlot();
    })

</script>
</body>
</html>

